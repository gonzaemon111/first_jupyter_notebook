## NumPyの多次元配列データ構造ndarrayの基礎

NumPyは、多次元配列を基本的なデータ構造として操作するライブラリです。そのため、NumPyにはPythonのリストを使った演算ではなく、効率性などからndarrayという独自のデータ構造を使います。

NumPyを勉強するにあたって、ndarrayについて知っておくことでコードの高速化やメモリの省メモリを意識したコードを書くことができるようになります。

一般に、NumPyは科学技術計算のためにつくられたライブラリということもあって、大量のデータや高速に演算したいことは多いはずです。

今回は、基礎の基礎となる部分である、ndarrayについて一から解説したいと思います。他の記事では、ndarrayのことを配列と日本語で表記することが多いですが基本的に両者は同じものを指しています。

### ndarray

#### 定義

まずは公式サイトにのっているndarrayの定義からみていきましょう。公式サイトには以下のように書いてあります。

ndarrayはたいてい一定の大きさを持つ、同じサイズや型で構成された複数要素の多次元の容れ物である。

ざっくり言うと、同じ属性や大きさを持った要素を持つ多次元配列を扱うためのクラスの１つということです。そもそもndarrayというのはN-dimensional arrayの略となっており、N次元配列を略しただけですね。

この同じ属性や大きさを持った要素の部分は意外と重要です。これはndarrayインスタンスの中に格納される要素は全て同じ種類のデータ型やサイズでないといけないことを意味します。

Pythonのリストのように要素ごとにデータ型を柔軟に変えることはできず、サイズも可変ではありません。

このクラスndarrayの特徴は以下の通りです。

同じ型を持つ要素しか格納することができない
各次元ごとの(2次元なら列ごとや行ごと)の要素数は必ず一定
C言語を元に、最適化された行列演算を行うため効率的な処理をすることができる
ndarrayにすることで、多次元データを扱うための便利な属性を使用することができるようになります。

#### 属性(attributes)

ここではndarrayが持つ属性を紹介していきます。(インスタンス変数名).(属性)とすればインスタンスとなっているndarrayの情報を取得することができます。

|属性|説明|
|:---:|:---:|
|`T`|2  |
|`data`|5  |
|`dtype`|ndarrayに含まれる要素が持つデータ型。|
|`flags`|メモリ上におけるndarrayのデータの格納の仕方(Memory Layout)についての情報。|
|`flat`|ndarrayを１次元配列に変換するイテレーター。|
|`imag`|ndarrayにおける虚数部分(imaginary part)。|
|`real`|ndarrayにおける実数部分(real part)。|
|`size`|ndarrayに含まれる要素の数。|
|`itemsize`|バイト単位での一つ一つの要素の大きさ。|
|`nbytes`|そのndarrayの要素によって占められるバイト単位でのメモリ総量。|
|`ndim`|ndarrayに含まれる次元の数。|
|`shape`|ndarrayの形状(shape)をタプルで表したもの。|
|`strides`|各次元方向に１つ隣の要素に移動するために必要なバイト数をタプルで表示したもの。|
|`ctypes`|ctypesモジュールで扱うためのイテレーター。|
|`base`|ndarrayのベースとなるオブジェクト(どのメモリを参照しているのか)。|
